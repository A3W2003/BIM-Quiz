<script type="text/javascript">
        var gk_isXlsx = false;
        var gk_xlsxFileLookup = {};
        var gk_fileData = {};
        function filledCell(cell) {
          return cell !== '' && cell != null;
        }
        function loadFileData(filename) {
        if (gk_isXlsx && gk_xlsxFileLookup[filename]) {
            try {
                var workbook = XLSX.read(gk_fileData[filename], { type: 'base64' });
                var firstSheetName = workbook.SheetNames[0];
                var worksheet = workbook.Sheets[firstSheetName];

                // Convert sheet to JSON to filter blank rows
                var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1, blankrows: false, defval: '' });
                // Filter out blank rows (rows where all cells are empty, null, or undefined)
                var filteredData = jsonData.filter(row => row.some(filledCell));

                // Heuristic to find the header row by ignoring rows with fewer filled cells than the next row
                var headerRowIndex = filteredData.findIndex((row, index) =>
                  row.filter(filledCell).length >= filteredData[index + 1]?.filter(filledCell).length
                );
                // Fallback
                if (headerRowIndex === -1 || headerRowIndex > 25) {
                  headerRowIndex = 0;
                }

                // Convert filtered JSON back to CSV
                var csv = XLSX.utils.aoa_to_sheet(filteredData.slice(headerRowIndex)); // Create a new sheet from filtered array of arrays
                csv = XLSX.utils.sheet_to_csv(csv, { header: 1 });
                return csv;
            } catch (e) {
                console.error(e);
                return "";
            }
        }
        return gk_fileData[filename] || "";
        }
        </script><!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BIM Quiz</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-100">
  <div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold text-center mb-6">BIM Quiz</h1>
    <div class="mb-4">
      <label for="discipline" class="block text-lg font-medium">Select Discipline:</label>
      <select id="discipline" class="mt-1 block w-full p-2 border rounded">
        <option value="architecture">Architecture</option>
        <option value="civil">Civil and Structural</option>
        <option value="mep">MEP</option>
      </select>
    </div>
    <div id="quiz" class="bg-white p-6 rounded-lg shadow-md">
      <h2 id="discipline-title" class="text-2xl font-semibold mb-4"></h2>
      <div id="timer" class="text-lg font-medium mb-4"></div>
      <div id="questions"></div>
      <button id="submit" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Submit</button>
    </div>
    <div id="modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden">
      <div class="bg-white p-6 rounded-lg">
        <h3 class="text-xl font-bold mb-4">Quiz Results</h3>
        <p id="score"></p>
        <button id="close" class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Close</button>
      </div>
    </div>
  </div>
  <script>
    const architectureQuestions = [
      // Easy (4 questions)
      { question: "What does BIM stand for?", options: ["Building Information Modeling", "Basic Integrated Management", "Building Infrastructure Model", "Business Information Management"], answer: 0, difficulty: "Easy" },
      { question: "Which software is commonly used for BIM?", options: ["AutoCAD", "Revit", "SketchUp", "Photoshop"], answer: 1, difficulty: "Easy" },
      { question: "What is the primary purpose of BIM?", options: ["2D drafting", "3D modeling", "Project management", "All of the above"], answer: 3, difficulty: "Easy" },
      { question: "What is a BIM model?", options: ["A physical model", "A digital representation", "A cost estimate", "A schedule"], answer: 1, difficulty: "Easy" },
      // Medium (4 questions)
      { question: "What is a BIM execution plan?", options: ["A document outlining BIM processes", "A software tool", "A type of BIM model", "A certification"], answer: 0, difficulty: "Medium" },
      { question: "What is clash detection in BIM?", options: ["Finding errors in code", "Identifying conflicts in models", "Estimating costs", "Scheduling tasks"], answer: 1, difficulty: "Medium" },
      { question: "What is the difference between BIM and CAD?", options: ["BIM is 3D, CAD is 2D", "BIM includes data, CAD is just geometry", "BIM is for architects, CAD is for engineers", "There is no difference"], answer: 1, difficulty: "Medium" },
      { question: "What does LOD stand for in BIM?", options: ["Level of Detail", "Level of Development", "Both A and B", "None of the above"], answer: 2, difficulty: "Medium" },
      // Difficult (4 questions)
      { question: "What is parametric modeling in BIM?", options: ["Modeling with parameters", "Automated modeling", "Manual drafting", "3D printing"], answer: 0, difficulty: "Difficult" },
      { question: "What is the role of BIM in sustainable design?", options: ["Energy analysis", "Material selection", "Waste reduction", "All of the above"], answer: 3, difficulty: "Difficult" },
      { question: "What is a federated BIM model?", options: ["A single model", "Combined models from different disciplines", "A model with federal data", "A government standard"], answer: 1, difficulty: "Difficult" },
      { question: "What is a future trend of BIM?", options: ["Integration with AI", "Virtual reality", "Automation", "All of the above"], answer: 3, difficulty: "Difficult" }
    ];

    const civilQuestions = [
      // Easy (4 questions)
      { question: "What is the primary material in civil engineering?", options: ["Steel", "Concrete", "Wood", "All of the above"], answer: 3, difficulty: "Easy" },
      { question: "What does CAD stand for?", options: ["Computer-Aided Design", "Computer-Animated Design", "Computer-Assisted Drafting", "Computer-Advanced Design"], answer: 0, difficulty: "Easy" },
      { question: "What is the purpose of a foundation?", options: ["To support the structure", "To provide insulation", "To enhance aesthetics", "To reduce costs"], answer: 0, difficulty: "Easy" },
      { question: "What is a beam in structural engineering?", options: ["A horizontal member", "A vertical member", "A diagonal member", "A foundation element"], answer: 0, difficulty: "Easy" },
      // Medium (4 questions)
      { question: "What differs between a column and a pillar?", options: ["No difference", "Columns are load-bearing, pillars are decorative", "Pillars are load-bearing, columns are decorative", "Columns are concrete, pillars are steel"], answer: 1, difficulty: "Medium" },
      { question: "What is reinforced concrete?", options: ["Concrete with steel bars", "Concrete with fibers", "Concrete with additives", "All of the above"], answer: 0, difficulty: "Medium" },
      { question: "What is the purpose of a retaining wall?", options: ["To hold back soil", "To support a roof", "To divide spaces", "To provide seating"], answer: 0, difficulty: "Medium" },
      { question: "What is a geotechnical investigation?", options: ["Study of soil properties", "Study of building materials", "Study of structural designs", "Study of construction methods"], answer: 0, difficulty: "Medium" },
      // Difficult (4 questions)
      { question: "What is prestressed concrete?", options: ["Concrete with pre-applied stress", "Concrete with post-applied stress", "Concrete with no stress", "Concrete with fibers"], answer: 0, difficulty: "Difficult" },
      { question: "What is the role of BIM in civil engineering?", options: ["Design visualization", "Clash detection", "Quantity takeoff", "All of the above"], answer: 3, difficulty: "Difficult" },
      { question: "What is a cantilever beam?", options: ["A beam supported at both ends", "A beam supported at one end", "A beam with no support", "A beam with multiple supports"], answer: 1, difficulty: "Difficult" },
      { question: "What is the finite element method?", options: ["A numerical technique for solving problems", "A design software", "A construction method", "A material testing procedure"], answer: 0, difficulty: "Difficult" }
    ];

    const mepQuestions = [
      // Easy (4 questions)
      { question: "What does MEP stand for?", options: ["Mechanical, Electrical, Plumbing", "Materials, Engineering, Planning", "Management, Execution, Performance", "Modeling, Estimation, Production"], answer: 0, difficulty: "Easy" },
      { question: "What is HVAC?", options: ["Heating, Ventilation, Air Conditioning", "High Voltage Alternating Current", "Home Ventilation and Cooling", "Heating and Ventilation Control"], answer: 0, difficulty: "Easy" },
      { question: "What is the purpose of a circuit breaker?", options: ["To protect against overcurrent", "To regulate voltage", "To increase current", "To measure power"], answer: 0, difficulty: "Easy" },
      { question: "What is a duct in HVAC?", options: ["A pipe for air", "A wire for electricity", "A tube for water", "A structural element"], answer: 0, difficulty: "Easy" },
      // Medium (4 questions)
      { question: "What differs between AC and DC current?", options: ["AC alternates, DC is constant", "AC is for homes, DC for cars", "AC is safer, DC is dangerous", "No difference"], answer: 0, difficulty: "Medium" },
      { question: "What is a P-trap in plumbing?", options: ["A type of valve", "A bend to prevent sewer gas", "A pump", "A filter"], answer: 1, difficulty: "Medium" },
      { question: "What is insulation’s purpose in MEP?", options: ["To reduce heat loss", "To prevent electrical shocks", "To minimize noise", "All of the above"], answer: 3, difficulty: "Medium" },
      { question: "What is a BIM coordinator’s role in MEP?", options: ["To manage models", "To coordinate disciplines", "To perform calculations", "All of the above"], answer: 1, difficulty: "Medium" },
      // Difficult (4 questions)
      { question: "What is load calculation in HVAC?", options: ["Determining heating/cooling needs", "Calculating electrical loads", "Estimating material costs", "Scheduling tasks"], answer: 0, difficulty: "Difficult" },
      { question: "What is BIM’s role in MEP coordination?", options: ["Clash detection", "Scheduling", "Cost estimation", "All of the above"], answer: 0, difficulty: "Difficult" },
      { question: "What is a VAV system in HVAC?", options: ["Variable Air Volume", "Ventilation and Airflow Valve", "Vacuum Assisted Ventilation", "Vertical Airflow Vector"], answer: 0, difficulty: "Difficult" },
      { question: "What does a transformer do in electrical systems?", options: ["Steps up/down voltage", "Converts AC to DC", "Stores energy", "Measures current"], answer: 0, difficulty: "Difficult" }
    ];

    const questions = {
      architecture: architectureQuestions,
      civil: civilQuestions,
      mep: mepQuestions
    };

    const disciplineSelect = document.getElementById('discipline');
    const quizDiv = document.getElementById('quiz');
    const disciplineTitle = document.getElementById('discipline-title');
    const timerDiv = document.getElementById('timer');
    const questionsDiv = document.getElementById('questions');
    const submitBtn = document.getElementById('submit');
    const modal = document.getElementById('modal');
    const scoreP = document.getElementById('score');
    const closeBtn = document.getElementById('close');

    let currentDiscipline = 'architecture';
    let timeLeft = 15 * 60; // 15 minutes in seconds
    let timerId;

    function loadQuestions() {
      const discipline = questions[currentDiscipline];
      disciplineTitle.textContent = currentDiscipline.charAt(0).toUpperCase() + currentDiscipline.slice(1);
      questionsDiv.innerHTML = '';
      discipline.forEach((q, index) => {
        const questionHtml = `
          <div class="mb-4">
            <p class="font-medium">${index + 1}. ${q.question} (${q.difficulty})</p>
            ${q.options.map((option, i) => `
              <label class="block ml-4">
                <input type="radio" name="q${index}" value="${i}" class="mr-2"> ${option}
              </label>
            `).join('')}
          </div>
        `;
        questionsDiv.innerHTML += questionHtml;
      });
      submitBtn.disabled = false; // Re-enable submit button on reset
    }

    function startTimer() {
      clearInterval(timerId);
      timeLeft = 15 * 60;
      updateTimer();
      timerId = setInterval(() => {
        timeLeft--;
        updateTimer();
        if (timeLeft <= 0) {
          clearInterval(timerId);
          timerDiv.textContent = "Time's up!";
          submitQuiz();
        }
      }, 1000);
    }

    function updateTimer() {
      const minutes = Math.floor(timeLeft / 60);
      const seconds = timeLeft % 60;
      timerDiv.textContent = `Time left: ${minutes}:${seconds < 10 ? '0' : ''}${seconds}`;
    }

    function submitQuiz() {
      clearInterval(timerId);
      submitBtn.disabled = true; // Prevent multiple submissions
      let score = 0;
      const discipline = questions[currentDiscipline];
      discipline.forEach((q, index) => {
        const selected = document.querySelector(`input[name="q${index}"]:checked`);
        if (selected && parseInt(selected.value) === q.answer) {
          score++;
        }
      });
      scoreP.textContent = `You scored ${score} out of ${discipline.length}`;
      modal.classList.remove('hidden');
    }

    disciplineSelect.addEventListener('change', (e) => {
      currentDiscipline = e.target.value;
      loadQuestions();
      startTimer();
    });

    submitBtn.addEventListener('click', submitQuiz);

    closeBtn.addEventListener('click', () => {
      modal.classList.add('hidden');
      loadQuestions();
      startTimer();
    });

    // Initialize quiz
    loadQuestions();
    startTimer();
  </script>
</body>
</html>